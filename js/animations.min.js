import{safeExecute,isLibraryLoaded}from"./error-handler.js";const TYPING_CONFIG={TYPE_SPEED:50,DELETE_SPEED:25,PAUSE_DURATION:3e3,NEXT_TEXT_DELAY:500,INITIAL_DELAY:1500},PARTICLES_CONFIG={PARTICLE_COUNT:50,DENSITY_AREA:800,MOVE_SPEED:.5,PARTICLE_SIZE:3,OPACITY:.6},AOS_CONFIG={DURATION:800,OFFSET:100},OBSERVER_CONFIG={THRESHOLD:.3,ROOT_MARGIN:"0px"};export const IMAGE_ERROR_RECHECK_DELAY=1e3;export function initTypingEffect(){return safeExecute(()=>{const e=document.querySelector(".typed-text");if(!e)return;const t=["Structured, stable, and effortlessly alive","Built for scale, designed for reliability","Automated, resilient, and brilliantly efficient"];if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void(e.textContent=t[0]);let n=0,r=0,o=!1;setTimeout(function i(){const a=t[n];!o&&r<a.length?(e.textContent+=a.charAt(r),r++,setTimeout(i,TYPING_CONFIG.TYPE_SPEED)):o&&r>0?(e.textContent=a.substring(0,r-1),r--,setTimeout(i,TYPING_CONFIG.DELETE_SPEED)):o||r!==a.length?o&&0===r&&(o=!1,n=(n+1)%t.length,setTimeout(i,TYPING_CONFIG.NEXT_TEXT_DELAY)):setTimeout(()=>{o=!0,i()},TYPING_CONFIG.PAUSE_DURATION)},TYPING_CONFIG.INITIAL_DELAY)},null,"Typing Effect")}export function initParticles(){if(isLibraryLoaded("particlesJS")){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches)return safeExecute(()=>{particlesJS("particles-js",{particles:{number:{value:PARTICLES_CONFIG.PARTICLE_COUNT,density:{enable:!0,value_area:PARTICLES_CONFIG.DENSITY_AREA}},color:{value:"#ffffff"},shape:{type:"circle"},opacity:{value:PARTICLES_CONFIG.OPACITY,random:!0},size:{value:PARTICLES_CONFIG.PARTICLE_SIZE,random:!0},line_linked:{enable:!1},move:{enable:!0,speed:PARTICLES_CONFIG.MOVE_SPEED,direction:"none",random:!0,straight:!1,out_mode:"out"}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1},onclick:{enable:!1},resize:!0}},retina_detect:!0})},null,"Particles.js");console.log("Particles disabled due to prefers-reduced-motion")}else console.warn("Particles.js not loaded, skipping animation")}export function initAOS(){if(isLibraryLoaded("AOS"))return safeExecute(()=>{AOS.init({duration:AOS_CONFIG.DURATION,easing:"ease-out",once:!0,offset:AOS_CONFIG.OFFSET,disable:window.matchMedia("(prefers-reduced-motion: reduce)").matches})},null,"AOS");console.warn("AOS library not loaded, skipping animations")}export function initFadeInSections(){return safeExecute(()=>{const e=document.querySelectorAll(".fade-in-section"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){e.target.classList.add("is-visible");e.target.querySelectorAll("img[data-src]").forEach(e=>{e.src=e.dataset.src,e.removeAttribute("data-src")}),t.unobserve(e.target)}})},{threshold:OBSERVER_CONFIG.THRESHOLD,rootMargin:OBSERVER_CONFIG.ROOT_MARGIN});e.forEach(e=>t.observe(e))},null,"Fade-in Sections")}export function initWhatIDoAnimation(e){return safeExecute(()=>{const t=document.querySelector(".what-i-do-image"),n=document.querySelector(".what-i-do-text"),r=document.querySelector(".what-i-do-image-onprem"),o=document.querySelector(".what-i-do-text-onprem");t&&e.observe(t),n&&e.observe(n),r&&e.observe(r),o&&e.observe(o)},null,"What I Do Animation")}export function initTerminalAnimation(){return safeExecute(()=>{const e=document.querySelector(".typed-command"),t=document.querySelector(".terminal-output");if(!e||!t)return;const n=[{cmd:"whoami",output:"Ahmed Belal\nSenior Systems & Cloud Infrastructure Engineer | DevOps & Automation"},{cmd:"cat /etc/profile",output:"12+ years automating enterprise-scale environments\nHigh-availability solutions with 99.9% uptime\nMulti-cloud architect across KSA and Egypt"},{cmd:"ls -la /skills/",output:"drwxr-xr-x  aws/          drwxr-xr-x  kubernetes/\ndrwxr-xr-x  azure/        drwxr-xr-x  terraform/\ndrwxr-xr-x  docker/       drwxr-xr-x  ansible/\ndrwxr-xr-x  linux/        drwxr-xr-x  ci-cd/"},{cmd:"docker compose ps",output:"SERVICE              STATUS       UPTIME\naws-infrastructure   healthy      365 days\nkubernetes-cluster   healthy      180 days\nci-cd-pipeline      healthy      90 days"},{cmd:"kubectl get pods -n production",output:"NAME                    READY   STATUS    RESTARTS\napi-deployment-7d9f8    2/2     Running   0\ndb-statefulset-0        1/1     Running   0\nmonitoring-stack-5c8    1/1     Running   0"},{cmd:"git log --oneline -4",output:"a3f5d2b Multi-cloud disaster recovery implemented\nc7e9b1a Kubernetes resource optimization\n2d4f8e3 Terraform AWS VPC automation\n9b1c6a5 GitLab CI/CD pipeline enhancement"},{cmd:"curl https://cloudycode.dev/status",output:"✓ Infrastructure: Operational (99.97% uptime)\n✓ All services healthy | Zero incidents\n✓ Multi-region deployment active"}];let r=0;setTimeout(function o(){r>=n.length&&(r=0);const{cmd:i,output:a}=n[r];e.textContent="",t.textContent="",function(t,n){let r=0;e.textContent="",e.innerHTML="";const o=document.querySelector(".cursor-terminal");o&&(o.style.display="none"),function o(){if(r<t.length){const n=t[r],i=t.substring(0,r+1);e.innerHTML=i+'<span class="typing-cursor"></span>',r++;let a=50+30*Math.random();" "===n&&(a+=20),"/"!==n&&"-"!==n&&"."!==n||(a+=15),setTimeout(o,a)}else e.textContent=t,setTimeout(n,500)}()}(i,()=>{var e,n;e=a,n=()=>{r++,setTimeout(o,1e3)},t.textContent=e,setTimeout(n,3e3)})},1e3)},null,"Terminal Animation")}export function initCounters(){return safeExecute(()=>{const e=document.querySelectorAll("[data-target]");if(0===e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.textContent=e.getAttribute("data-target"));const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&"0"===e.target.textContent&&((e=>{const t=parseFloat(e.getAttribute("data-target")),n=t/125;let r=0;const o=()=>{r+=n,r<t?(e.textContent=t%1!=0?r.toFixed(1):Math.floor(r),requestAnimationFrame(o)):e.textContent=t};o()})(e.target),t.unobserve(e.target))})},{threshold:.5});e.forEach(e=>t.observe(e))},null,"Counter Animation")}